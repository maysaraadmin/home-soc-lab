# Cortex Configuration
include "application.sample.conf"

# HTTP server configuration
http {
  host = "0.0.0.0"
  port = 9001
  base-path = "/"
  tls = false
  keystore = null
  keystore-password = null
}

# Authentication configuration
auth {
  basic {
    realm = "Cortex"
    password = "cortex-password"
  }
  
  provider = [
    {
      name = "local"
      type = "local"
      config {
        password = "cortex-password"
      }
    }
  ]
}

# Database configuration
database {
  # PostgreSQL configuration
  postgresql = {
    url = "jdbc:postgresql://postgres:5432/cortex"
    username = "cortex"
    password = "cortex"
    driver = "org.postgresql.Driver"
    connectionPool = "HikariCP"
    keepAliveConnection = true
    properties = {
      connectionTimeout = "30000"
      idleTimeout = "600000"
      maxLifetime = "1800000"
      minimumIdle = 2
      maximumPoolSize = 10
    }
  }
}

# Analyzer configuration
analyzer {
  # Path to the analyzers directory
  path = ["/opt/cortex/analyzers"]
  
  # Fork-join pool configuration
  fork-join-executor {
    # Min number of threads to cap factor-based parallelism number to
    parallelism-min = 2
    # Parallelism (threads) ... ceil(available processors * factor)
    parallelism-factor = 2.0
    # Max number of threads to cap factor-based parallelism number to
    parallelism-max = 4
  }
}

# Responder configuration
responder {
  # Path to the responders directory
  path = ["/opt/cortex/responders"]
  
  # Fork-join pool configuration
  fork-join-executor {
    parallelism-min = 2
    parallelism-factor = 2.0
    parallelism-max = 4
  }
}

# Elasticsearch configuration
elasticsearch {
  # List of Elasticsearch hosts
  uri = ["http://elasticsearch:9200"]
  
  # Index name
  index = "cortex"
  
  # Number of shards
  shards = 5
  
  # Number of replicas
  replicas = 1
}

# Job configuration
job {
  # Check for jobs every second
  check-frequency = 1 second
  
  # Maximum number of jobs running in parallel
  max-concurrent = 10
  
  # Job retention time
  retention-time = 7 days
}

# Cache configuration
cache {
  # Maximum number of items in the cache
  max-items = 1000
  
  # Time to live for cache items
  ttl = 10 minutes
}
