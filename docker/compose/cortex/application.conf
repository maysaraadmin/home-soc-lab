# Cortex Configuration

# Application secret key
play.http.secret.key = "your-cortex-secret-key-here"

# Database configuration
db {
  default {
    driver = "org.postgresql.Driver"
    url = "jdbc:postgresql://postgres:5432/cortex"
    username = "postgres"
    password = "cortex"
    jndiName = "DefaultDS"
  }
}

# Authentication configuration
auth = [
  {
    name = "local"
    provider = "local"
    realm = "local"
  }
]

# HTTP server configuration
http {
  address = "0.0.0.0"
  port = 9001
  secret = "your-http-secret"
  secureCookie = false  # Set to true if using HTTPS
  session {
    secure = false  # Set to true if using HTTPS
    httpOnly = true
  }
}

# Job configuration
job {
  # Cleanup configuration
  cleanInterval = 1d
  cleanOlderThan = 7d
  
  # Job execution configuration
  checkInterval = 5s
  maxRetry = 3
  
  # Job cache configuration
  cache {
    enabled = true
    ttl = 1h
  }
}

# Analyzer configuration
analyzer {
  # Path to the analyzers configuration
  path = [
    "/opt/cortex/analyzers"
  ]
  
  # Fork-Join execution context configuration
  fork-join-executor {
    # Min number of threads to cap factor-based parallelism number to
    parallelism-min = 2
    
    # The parallelism factor is used to determine thread pool size using the
    # following formula: ceil(available processors * factor). Resulting size
    # is then bounded by the parallelism-min and parallelism-max values.
    parallelism-factor = 2.0
    
    # Max number of threads to cap factor-based parallelism number to
    parallelism-max = 4
  }
}

# Responder configuration
responder {
  # Path to the responders configuration
  path = [
    "/opt/cortex/responders"
  ]
}

# Storage configuration
storage {
  # Local filesystem storage
  local {
    path = "/data/files"
  }
}

# Elasticsearch configuration
elasticsearch {
  # Comma-separated list of hosts
  uri = "http://elasticsearch:9200"
  
  # Index name
  index = "cortex"
  
  # Number of shards
  nbShards = 1
  
  # Number of replicas
  nbReplicas = 0
  
  # Refresh interval
  refresh = "1s"
  
  # Scroll keepalive
  scrollKeepalive = "1m"
  
  # Bulk size
  bulkSize = 1000
  
  # Bulk flush interval
  bulkFlushInterval = "5s"
  
  # Bulk concurrent requests
  bulkConcurrentRequests = 2
}

# Cache configuration
cache {
  # Default cache TTL
  ttl = 1h
  
  # Maximum cache size
  maxSize = 10000
}

# Logging configuration
logger {
  root = INFO
  play = INFO
  org = INFO
  com = INFO
  akka = INFO
  fr = INFO
  org.apache.kafka = WARN
  org.elasticsearch = WARN
  org.mongodb = WARN
  org.reflections = ERROR
}

# Application secret
play.http.secret.key = "your-application-secret-here"
