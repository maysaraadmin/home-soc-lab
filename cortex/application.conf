# Cortex Configuration

# HTTP server configuration
http {
  address = "0.0.0.0"
  port = 9001
  secret = "changeme"
  ssl {
    enabled = false
  }
}

# Authentication configuration
auth {
  providers = ["local", "apiKey", "_anonymous"]
  anonymous.group = "read-only"
}

# Elasticsearch configuration
elasticsearch {
  uri = "http://localhost:9201"
  index = "cortex"
  # Increase timeouts for slow environments
  client.connection.timeout = 30s
  client.connection.keepalive = 60s
  client.connection.retry = 3
  client.retry.interval = 5s
}

# Redis configuration
redis {
  uri = "redis://localhost:6380"
}

# Analyzers and responders configuration
analyzer {
  path = ["/opt/Cortex-Analyzers/analyzers"]
  fork-join-executor {
    # Min number of threads to cap factor-based parallelism number to
    parallelism-min = 2
    # Parallelism (threads) ... ceil(available processors * factor)
    parallelism-factor = 2.0
    # Max number of threads to cap factor-based parallelism number to
    parallelism-max = 4
  }
}

responder {
  path = ["/opt/Cortex-Analyzers/responders"]
}

# Job configuration
job {
  # Directory where job files are stored
  directory = "/tmp/cortex-jobs"
  
  # Cleanup configuration
  cleanup {
    # Cleanup jobs older than this duration
    olderThan = 1 day
    
    # How often to run the cleanup job
    interval = 1 hour
  }
}

# Cache configuration
cache {
  # Cache TTL for analyzer definitions
  analyzer.ttl = 5 minutes
  
  # Cache TTL for responder definitions
  responder.ttl = 5 minutes
}

# Logging configuration
logger {
  # Root logger level (OFF, ERROR, WARN, INFO, DEBUG, TRACE, ALL)
  root = INFO
  
  # Application logger levels
  application = INFO
  
  # Play framework logger levels
  play = INFO
  
  # Akka logger levels
  akka = INFO
  
  # Elastic4s logger levels
  com.sksamuel.elastic4s = INFO
}
